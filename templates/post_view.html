{% extends "base.html" %}
{% block content %}

<h3>{{ post.title }}</h3>
<p>{{ post.text }}</p>
<a href='{{ post.project_link }}'>
    <div class='github_link'>
        <p>{{ info['author'] }}</p>
        <p>{{ post.project_link }}</p>
        <p>{{ info['description'] }}</p>
        <p>{{ info['stars'] }}</p>
    </div>
</a>
<a href={{ url_for('post_like_action', id=post.id, action='like') }}>+ {{post.like}}</a>
<a href={{ url_for('post_like_action', id=post.id, action='dislike') }}>- {{post.dislike}}</a>
{% if post.author_id == current_user.id or current_user.id == 1 %}
<p><a class='btn btn-warning' href='/posts/edit/{{post.id}}'>Изменить</a></p>
{% endif %}

<form action="" method="post">
    {{ form.hidden_tag() }}
    <p>
        {{ form.text.label }}<br>
        {{ form.text(class="form-control") }}<br>
        {% for error in form.text.errors %}
            <p class="alert alert-danger" role="alert">
                {{ error }}
            </p>
        {% endfor %}
    </p>
    <p>{{ form.submit(type="submit", class="btn btn-primary") }}</p>
    {% if message %}
        <p class="alert alert-danger" role="alert">{{ message }}</p>
    {% endif %}
</form>

{% for comment in post.comments %}
    {{ comment.author.name }}
    {{ comment.text }}
    <a href={{ url_for('comment_like_action', id=comment.id, action='like') }}>+ {{comment.like}}</a>
    <a href={{ url_for('comment_like_action', id=comment.id, action='dislike') }}>- {{comment.dislike}}</a>
    <br>
{% endfor %}


{% endblock %}
